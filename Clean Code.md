# 함수

### 1. 작게 만들어라 
- 블록과 들여쓰기
  - if/else/while에 들어가는 블록은 한줄
  - 들여쓰기 수준이 1단이나 2단을 넘어서면 안된다


### 2. 한가지만 해라
- 함수 당 추상화 수준이 하나여야 한다
- 위에서 아래로 코드 읽기: 내려가기 규칙
- Switch 문은 작게 만들기 어렵다. N가지를 처리
  - 다형적 객체를 생성하는 코드는 switch문을 피하기 어렵다
  - 이때는 주로 상속관계로 숨긴 후 절대로 다른 코드에 노출하지 않는다. 
  - switch 문의 문제
    - 함수가 너무 길다
    - 한가지 작업만 하지 않는다
    - SRP(Single Responsibility Principle) 위반
    - OCP(Open Close Principle) 위반
  - 추상 팩토리에 숨기고, 파생 클래스로 인스턴스 생성
    - 다형성으로 인해 실제 파생 클래스의 함수가 실행 


### 3. 서술적인 이름을 사용하라
- 이름 짓는 것에 시간 많이 스자


### 4. 함수 인수
- 무항 > 1항 > 2항 
  - 3항은 피하는 것이 좋다, 테스트 할 때도 어렵다
  - 출력인수는 더 어렵다
- 단항 함수
  - 이벤트 함수는 주로 단항함수
  - 이벤트 함수는 이벤트라는 것이 함수에 명확히 드러나야한다
- 플래그 인수: 추하다, 함수를 나누자
- 이항 함수
  - 클래스의 멤버 메서드로 만들어서 최대한 단항함수로
- 삼항 함수
  - 인수 객체
  - 가변 인수
- 동사와 키워드로 함수 이름 잘 정하기   


### 5. 부수 효과를 일으키지 마라
- 가끔 부수적인 효과를 일으킨다
  -  temporal coupling이나 order dependency를 일으킨다.
  -  혼선이 커진다
    - checkPassword &rarr; checkPasswordAndInitializeSession
- 출력인수 피하기   


### 6. 명령과 조회를 분리하라!
- 객체 상태를 변경(set) vs 객체 정보를 반환(get)


### 7. 오류 코드보다 예외를 사용하라
- retrun ERROR 대신 try/catch
- try/catch는 별도로 함수 만들자.
  - 정상 동작과 오류 처리 동작을 분리하자
- 오류 처리도 한 가지 작업이다: try/catch는 한 함수에 한번만  


### 8. 반복하지 마라
- 구조적 프로그래밍, AOP(Aspect Oriented Programming), COP(Component Oriented Programming)


### 9. 함수는 처음에는 길고 복잡한데, 계속 다듬는다.
- 시스템을 기술할 목적으로의 프로그래밍

# 주석
주석은 나쁜 코드를 보완하지 못한다.<br>
코드로 의도를 표현하라.<br>
주석을 줄이도록 꾸준히 노력하라.
### 1. 좋은 주석
- 법적인 주석
- 정보를 제공하는 주석
- **의도를 설명하는 주석**
- 의미를 명료하게 밝히는 주석
- 결과를 경고하는 주석
- TODO 주석
- 중요성을 강조하는 주석
- 공개 API에서 Javadocs
### 2. 주석을 달 때는 더 나은 방법이 없는지 고민하고 정확히 달기
### 3. 나쁜 주석
- 주절거리는 주석: 충분히 시간을 들여 최고의 주석을 달자
- 같은 이야기를 중복하는 주석
- 오해할 여지가 있는 주석
- 의무적으로 다는 주석
- 있으나마나한 주석
- 무서운 잡음
- 함수나 변수로 표현할 수 있으면 주석을 달지 말라
- 위치를 표시하는 주석: 배너를 드물게 사용하자
- 닫는 괄호에 다는 주석: 함수를 줄이려고 노력해보자
- 공로를 돌리거나 저자를 표시하는 주석
- 주석으로 처리한 코드
- HTML 주석은 혐오 그 자체이다.
- 전역정보: 근처에 있는 코드만 기술하라
- 너무 많은 정보
- 모호한 관계: 주석과 주석이 설명하는 코드 사이의 관계가 명확해야한다.

# 형식 맞추기
의사소통의 일환
### 1. 적절한 행 길이 유지
- 신문 기사처럼 작성하라
  - 표제 - 첫 문단(커다란 그림) - 세부사항
  - 함수 이름 - 고차원 개념, 알고리즘 - 저차원 함수와 세부 내역
- 개념은 빈 행으로 분리하라
- 세로 밀집도: 연관성
- 수직 거리: 밀접한 개념은 세로로 가까이 둬야 함
  - 변수 선언: 변수는 사용한느 위치에 최대한 가까이 선언
  - 인스턴스 변수: 클래스의 맨앞
  - 종속 함수: 세로로 가까이 배치, 호출되는 순서로 정렬  
  - 개념적 유사
  - 호출하는 함수 - 호출되는 함수
  - 가장 중요한 개념 먼저 표현
### 2. 가로 형식 맞추기
- 가로 공백과 밀집도: 요소 나눔, 연산자 우선순위
- 가로 정렬
- 들여쓰기
### 3. 팀 규칙, 밥 아저씨의 형식 규칙

# 객체와 자료 구조
- 왜 변수를 private으로 정의 하는가? 남들이 변수에 의존하지 않게 만들고 싶어서
- get함수와 set함수를 public하게 노출하는 이유는?

### 1. 자료 추상화
- 자료를 세세하게 공개하기보다는 추상적인 개념으로 표현하는 편이 좋다 
### 2. 자료/객체 비대칭
- 객체: 추상화 뒤로 자료를 숨긴 채 자료를 다루는 함수만 공개
- 자료구조: 자료를 그대로 공개하며 별다른 함수는 제공하지 않는다.
- 절차적인 코드: 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽다
- 객체 지향 코드: 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다.
### 3. 디미터 법칙
- 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다
- 클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야 한다
- 기차 충돌 코드
```python
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath()
```
- 잡종 구조
  - 절반은 객체, 절반은 자료구조
  - 비공개 변수를 사용하고픈 유혹에 빠지기 쉽다
- 구조체 감추기
  - get으로 객체 속을 공개하라고 하는 건 좋지 않다. 
### 4. 자료 전달 객체(Data transfer object, DTO)
- 자료 구조체, 자로 전달 객체: 공개 변수만 있고, 함수는 없는 클래스
- 데이터 베이스에 저장된 가공되지 않은 정보를 애플리케이션 코드에서 사용할 객체로 변환하는 단계에서 가장 처음으로 사요한느 구조체
- 빈(bean): private 변수를 get과 set으로 조작하는 것, 사이비 캡슐화
- 활성 레코드
  - DTO의 특수한 형태
  - 공개변수, 비공개변수에 조회/설정 함수, save나 find와 같은 탐색함수도 제공
  - 활성 레코드를 자료 구조로 취급
### 5. 결론
- 객체는 동작을 공개하고, 자료를 숨긴다
  - 기존 동작을 변경하지 않으면서 새 객체 타입을 추가하기 쉬움
  - 기존 객체에 새 동작을 추가하기는 어렵다
- 자료구조는 별른 다동작 없이 자료를 노출
  - 기존 자료 구조에 새 동작을 추가하기는 쉬우나 기존 함수에 새 자료구조를 추가하기는 어렵다
- 새로운 자료 타입을 추가하는 유연성이 필요하면 객체
- 새로운 새동작을 추가한느 유연성이 필요하면 자료구조, 절차적인 코드 적합

# 7. 오류 처리

- 깨끗한 코드는 읽기도 좋아야 하지만 안정성도 높아야 한다
- 오류 처리를 프로그램 논리와 분리

### 1. 오류 코드보다 예외를 사용하라

### 2. try-catch-finally 문부터 작성하라
- 트랜잭션과 비슷 
  - 예외 일으키는 코드 작성 후 통과하게 하는 코드를 작성하면 좋다
  - 그러면 자연스럽게 try블록의 트랜잭션 범위부터 구현하게 되므로, 범위내에서 트랜잭션 본질을 유지하기 쉬워짐
### 3. 미확인 예외를 사용하라
- 원래 확인된 예외를 사용, 예외를 모두 열거
  - OCP(Open Closed Principle)을 위반
  - 하위 함수에서 확인된 오류를 사용하면, 상위 함수들을 전부 바꿔야함, 캡술화가 깨어진다.
  - 아주 중요한 라이브러리는 모든 예외를 잡아야하므로 중요할 때도 있음
### 4. 예외에 의미를 제공하라
- 전후 상황을 덧붙인다.
- 오류가 발생한 원인과 위치를 찾기가 쉬워진다.
### 5. 호출자를 고려해 예외 클래스를 정의하라
- 예외 클래스
  - 외부 API를 감싸서 사용하면서 예외처리
  - 오류를 분류할 때, 오류를 잡아내는 방법에 집중해서 분류해야한다.
### 6. 정상 흐름을 정의하라
- 특수 사례 패턴(Special case pattern)
  - 클래스를 만들거나 객체를 조작해 특수 사례를 처리하는 방식
  - 클래스나 객체 안에서 예외 상황을 처리하게!!
### 7. Null을 반환하지 마라
- null 반복적으로 넣어줘야함
- null을 반환하고 싶다면
  - 감싸기 메서드를 구현해 예외를 던지거나
  - 특수 사례 객체를 반환하는 방식을 고려함
### 8. Null을 전달하지 마라
- 애초에 null을 넘기지 않도록 하는 것이 좋다.
